
## 접근 권한과 그룹
리눅스는 기본적으로 여러명이 함께 사용하는 `다중 사용자 시스템`이므로 각 사용자의 파일과 정보를 보호하기 위해 `접근 권한`을 제어하는 것이 필수다. 
또한 리눅스에서 사용자는 기본적으로 하나 이상의 그룹에 속해있다. 이 그룹에 속한 사용자들에게 권한을 부여하여 파일을 공유할 수 있다. 사용자가 속한 그룹은 시스템 관리자가 결정하며, 사용자 임의로 자신의 그룹을 바꿀 수 없다. 그룹이 정의된 파일은 `/etc/group`으로 시스템 관리자만 수정할 수 있다. 또한 사용자가 속한 그룹을 알려주는 명령은 `groups`다.
```bash
groups user1       // 인자 생략시 자신이 속한 그룹 출력
```

### 접근 권한

#### 기본 접근 권한
- file: `-rw-rw-r--`
- directory: `drwxrwxr-x`
- umask: 0002

기본 접근 권한을 확인하고 설정할 때 `umask` 명령을 사용
- umask \[옵션\] \[마스크 값\]
- 옵션 -S: 마스크 값을 문자로 출력
```bash
umask
0002

umask -S
u=rwx,g=rwx,o=rw

umask=077
umask -S
u=rwx,g=,o=
```

#### 특수 접근 권한
umask의 4자리 중 맨 앞자리가 1, 2, 4이면 `특수 접근 권한`이 설정된다. 
- 1: 스티키 비트
- 2: SetGID
- 4: SetUID

##### 스티키 비트(Sticky bit)
![](images/linux/stickybit.png)
`Sticky bit`는 디렉터리에 설정하며, 디렉터리에 `Sticky bit`가 설정되어 있으면 이 디렉터리에는 `누구나 파일을 생성`할 수 있다.  `Sticky bit`가 설정되면 기타 사용자의 실행 권한에 `t`가 표시된다. `/tmp` 디렉터리가 대표적이다.

##### SetUID
![](images/linux/setuid.png)

`SetUID`가 설정된 파일을 실행하면 해당 파일이 실행되는 동안에는 파일을 실행한 사용자의 권한이 아닌 `파일 소유자의 권한`이 적용된다. `SetUID`가 설정되면 소유자의 실행 권한에 `s`가 표시되는데, 이는 `set.exe` 파일을 실행하면 항상 `user1`의 권한을 가진다는 의미이다.
`SetUID`는 주로 일반 사용자가 root 권한으로 명령을 실행할 필요(자신의 계정 비밀번호를 변경하는 명령 등)가 있는 일부 명령에 설정하여 사용된다. 

##### SetGID
`SetGID`가 설정된 파일을 실행하면 해당 파일이 실행되는 동안 `파일 소유 그룹의 권한`으로 실행된다.


