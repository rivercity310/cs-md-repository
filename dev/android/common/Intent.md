- `Intent`는 메세징 객체로, 다른 앱 구성 요소로 `작업`을 요청하는데 사용된다
- Android 시스템이 어느 구성 요소를 시작할지 판별하는 데 사용하는 정보 포함
	- 정확한 구성 요소 이름
	- 인텐트를 수신해야 하는 구성 요소 카테고리
	- 수신자 구성 요소가 작업을 수행하기 위해 사용할 정보
	- 수행할 작업 및 조치를 취할 데이터의 위치
- 기본적인 Intent 사용 예는 크게 다음 세가지로 나뉜다
	- 액티비티 시작
	- 서비스 시작
	- 브로드캐스팅 전달

##### 1. 액티비티 시작
`Activity`: 앱 안의 단일 화면

- Activity의 새 인스턴스를 시작하려면 `Intent`를 `startActivity()`에 전달
- Activity가 완료되었을 때 결과를 수신하려면 `startActivityForResult()` 호출
- Activity는 해당 결과를 `onActivityResult()` 콜백에서 별도의 Intent 객체로 수신

##### 2. 서비스 시작
- `Service`
	- 사용자 인터페이스 없이 백그라운드에서 작업을 수행하는 구성 요소 
		- ex) 파일 다운로드와 같은 일회성 작업
	- Android 5.0(API Level 21) 이상부터는 `JobScheduler`로 서비스를 시작할 수 있음
	- 이하 버전에서는 `Service` 클래스의 메서드를 사용하여 서비스 시작
		- `Intent`를 `startService()`에 전달
		- `Intent`는 시작할 `Service`를 설명하고, 관련 모든 필수 데이터를 담고 있음

##### 3. 브로드캐스팅 전달
- 모든 앱이 수신할 수 있는 메세지
- 시스템은 시스템 이벤트에 대한 다양한 브로드캐스트를 전달
	- ex) 시스템이 부팅될 때, 기기가 충전을 시작할 때
- `Intent`를 `sendBroadcase()` 또는 `sendOrderedBroadcase()`에 전달하면 다른 앱에 브로드캐스트를 전달할 수 있음

---

### 인텐트 유형
인텐트는 다음 두가지 유형으로 나뉨
- 명시적 인텐트: 구성 요소의 이름이 지정된 경우
- 암시적 인텐트: 구성 요소의 이름이 누락된 경우

##### 명시적 인텐트
- 인텐트를 충족하는 애플리케이션이 무엇인지 지정
- 대상 앱의 패키지 이름 또는 완전히 자격을 갖춘(필터) 구성 요소 클래스 이름을 제공
- 일반적으로 앱 안의 구성 요소를 시작할 때 사용 (시작하고자 하는 요소의 클래스 이름을 알고있기 때문)
- 사용 예시
	- 사용자 작업에 응답하여 새로운 액티비티 시작
	- 백그라운드에서 파일을 다운로드하기 위해 서비스 시작

##### 암시적 인텐트

![](images/android/intent.png)

1. `Activity A`가 작업 설명이 있는 `Intent`를 생성하여 이를 `startActivity()`에 전달
2. Android 시스템이 모든 앱에서 해당 인텐트와 일치하는 인텐트 필터 검색
	- 호환되는 인텐트 필터가 여러 개인 경우, 시스템에서 대화상자를 표시하여 사용자가 어느 앱을 사용할지 직접 선택
3. 일치하는 항목을 찾으면 시스템이 해당 Activity의 `onCreate()` 메서드 호출, `Intent`에 전달, `Activity B` 시작

---
### 인텐트 필터
- 앱의 매니페스트 파일에 선언된 표현으로, 해당 구성 요소가 수신하고자 하는 인텐트의 유형을 나타냄. 
- 예를 들어 액티비티에 대한 인텐트 필터를 선언하면 다른 여러 앱이 특정한 종류의 인텐트를 가지고 액티비티를 직접 시작할 수 있게 됨
- 액티비티에 대한 인텐트 필터를 선언하지 않으면 명시적인 인텐트로만 시작할 수 있음

**앱의 보안을 위해 `Service`를 시작할 때는 명시적 인텐트만 사용할 것**
- `Service`에 대해서 인텐트 필터 선언X
- 암시적 인텐트를 사용하여 `Service` 시작시 보안 위험
	- 인텐트에 어느 `Service`가 응답하는지 확신할 수 없음
	- 사용자가 어떤 `Service`가 시작되는지 볼 수 없음

---

### 인텐트의 구성 
`Intent`에 포함된 기본 사항은 다음과 같다 

#### 1. 구성 요소 이름
- 시작할 구성 요소의 이름
- 선택 항목이지만, 인텐트를 명시적인 것으로 만들어주는 중요한 정보
- `Intent` 생성자, `setClass()`, `setClassName()` 등으로 지정

#### 2. 작업
- 수행할 일반적인 작업을 나타내는 문자열
- `setAction()` 또는 `Intent` 생성자를 통해 인텐트에 대한 작업 지정
- 보통은 `Intent`클래스나 다른 프레임워크 클래스가 정의한 작업 상수를 지정
- `Activity`를 시작하는 데 쓰이는 보편적인 작업
	- `ACTION_VIEW`
		- `Activity`가 사용자에게 표시할 수 있는 어떤 정보를 가지고 있을 때, `startActivity()`가 있는 인텐트에서 사용
		- ex) 갤러리 앱에서 볼 사진, 지도 앱에서 볼 주소 등
	- `ACTION_SEND`
		- `공유 인텐트`라고도 하며, 사용자가 다른 앱을 통해 공유할 수 있는 데이터를 가지고 있을 때`startActivity()`가 있는 인텐트에서 사용
		- ex) 이메일 앱, 소셜 공유 앱 등
		
- 임의의 작업을 직접 정의하는 경우, 앱의 패키지 이름을 접두어로 포함
```kotlin
const val ACTION_TIMETRAVEL = "com.example.action.TIMETRAVEL"
```


#### 3. 데이터
- 작업을 수행할 데이터 및 해당 데이터의 MIME 유형을 참조하는 `Uri`객체
- ex) 인텐트가 `ACTION_EDIT`인 경우, 데이터에 편집할 문서의 URI가 들어있어야 함
- 데이터의 MIME 유형을 지정하면 Android 시스템이 인텐트를 수신하기 가장 좋은 구성요소를 찾는 데 도움이 됨
- URI를 통해 MIME 유형을 추론할 수 있음 (특히 데이터가 `content:` URI 일 때)
	- `content:` 데이터가 기기 내에 위치하고 `ContentProvider`가 제어한다는 의미
- 설정
	- URI만 설정: `setData()`
	- MIME만 설정: `setType()`
	- 둘다: `setDataAndType()`

**둘다 지정 시 setData(), setType() 각각 사용 X**


#### 4. 카테고리
- `Intent`가 처리해야 하는 구성 요소의 종류에 관한 추가 정보를 담은 문자열
- `addCategory()`로 지정
- 대부분 없어도 되고, 보편적인 몇가지 카테고리는 다음과 같다
	- `CATEGORY_BROWSABLE`
		- 대상 `Activity`가 웹브라우저를 통해 시작되도록 허용
		- 이미지, 이메일 메세지 등의 링크로 참조된 데이터를 표시하게 함
	- `CATEGORY_LAUNCHER`
		- 지정된 `Activity`가 작업의 최초 액티비티임을 나타냄
		- 시스템의 애플리케이션 시작 관리자에 목록으로 게재됨


#### 5. 엑스트라
- 요청된 작업을 수행하는 데 필요한 추가 정보가 담긴 키-값 쌍
- `putExtra()` 메서드로 엑스트라 데이터 추가 가능
- `ACTION_SEND`로 이메일을 전송할 인텐트를 생성하는 경우
	- 받는 사람을 지정할 때 `EXTRA_EMAIL` 키를 사용, 제목은 `EXTRA_SUBJECT` 키로 지정
- `Intent` 클래스는 표준화된 데이터 유형에 대해 여러가지 `EXTRA_*` 상수 제공

- 임의의 엑스트라 키를 선언해야 하는 경우(본인의 앱이 수신할 인텐트인 경우), 앱의 패키지 이름을 접두어로 포함
```kotlin
const val EXTRA_GIGAWATTS = "com.example.EXTRA_GIGAWATTS"
```


#### 6. 플래그
- `Intent`에 대한 메타데이터와 같은 기능
- `setFlags()` 메서드로 플래그 지정 가능
- Android 시스템에 `Activity`를 시작할 방법에 대한 지침
	- ex) `Activity`가 어느 작업에 소속되어야 하는지 등
	- `Activity`를 시작한 다음 어떻게 처리해야 하는지


---
## References
- Android 공식문서
	- https://developer.android.com/guide/components/intents-filters?hl=ko